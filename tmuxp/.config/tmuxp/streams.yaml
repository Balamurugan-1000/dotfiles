session_name: streams
start_directory: ~/

windows:
  - window_name: dev
    layout: tiled
    panes:
      # Pane 1 - Streams server
      - pane_name: streams_server
        shell_command:
          - workon tpstreams
          - cdvirtualenv
          - cd streams
          - ./manage.py runserver 0.0.0.0:8001

      # Pane 2 - Lumberjack server
      - pane_name: lumberjack_server
        shell_command:
          - workon lumberjack
          - cdvirtualenv
          - cd lumberjack/lumberjack
          - ./manage.py runserver 0.0.0.0:8002

      # Pane 3 - Streams Tailwind
      - pane_name: streams_tailwind
        shell_command:
          - workon tpstreams
          - cdvirtualenv
          - cd streams
          - ./manage.py tailwind start

      # Pane 4 - Lumberjack celery
      - pane_name: lumberjack_celery
        shell_command:
          - workon lumberjack
          - cdvirtualenv
          - cd lumberjack/lumberjack
          - celery -A lumberjack worker --loglevel=INFO --concurrency=4 --queues=transcoding,celery,migrate_m3u8

